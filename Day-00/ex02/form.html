<!DOCTYPE html>
<html>
    <head>
        <title>Form</title>
        <style>
			@import url('https://fonts.cdnfonts.com/css/ninja-naruto');

            body 
			{
                background-image: url('https://i.ibb.co/dMLBCF1/8OL7JCh.jpg');
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
                font-family: 'Ninja Naruto', sans-serif;
                color: #333;
				height: 100vh;
            }
            
            form 
			{
				opacity: 0.9;
                max-width: 600px;
                margin: 0 auto;
                padding: 20px;
                background-color: #FEECC5;
                border: 3px solid #FFB81C;
                border-radius: 10px;
            }
            
			label 
			{
				display: block;
				margin-top: 10px;
				color: #FFB81C;
			}

			input[type="button"] 
			{
				background-color: #FFB81C;
                font-family: 'Ninja Naruto', sans-serif;
				color: #333;
				position: relative;
				left: 250px;
				height: 35px;
				border-radius: 13%;
			}

			label, input[type="radio"], input[type="checkbox"] 
			{
				display: inline-block;
				margin-right: 10px;
			}

			.error 
			{
    			color: red;
    			font-size: 12px;
			}

			.hidden 
			{
				display: none;
			}

			.not-hidden
			{
				display: block;
			}

			/* CSS pour cacher les messages d'erreur par défaut */
			.error
			{
				display: none;
			}

			.valid 
			{
            	border: 2px solid green;
        	}

			.invalid 
			{
            	border: 2px solid red;
        	}

			input:focus, textarea:focus 
			{
    			outline: none;
			}
            
        </style>
    </head>
    <body>
		<div>
			<form action="#" method="post">        
				<br>
					<label for="firstname">firstname</label>
					<input type="text" id="firstname" name="firstname" placeholder="Your firstname" maxlength="15">
					<span id="firstname_error" class="error"></span> <!-- Message d'erreur pour le prénom -->
				<br>
					<label for="name">name</label>
					<input type="text" id="name" name="name" placeholder="Your Family name" maxlength="15">
					<span id="name_error" class="error"></span> <!-- Message d'erreur pour le nom -->
				<br>
					<label for="age">Age</label>
					<input type="date" id="age" name="age">
					<span id="age_error" class="error"></span> <!-- Message d'erreur pour l'âge -->
				<br>
					<label for="phone">Phone number</label>
					<input type="tel" id="phone" name="phone" placeholder="Write your phone number" maxlength="10"/>
					<span id="phone_error" class="error"></span> <!-- Message d'erreur pour le phone number -->
				<br>
					<label for="email">email</label> 
					<input type="email" id="email" name="email" placeholder="Write your email">
					<span id="email_error" class="error"></span> <!-- Message d'erreur pour le email -->
				<br>
					<label for="gender">What is your gender ?</label> <br>
					<label for="gender_male">Male</label>
					<input type="radio" id="gender_male" name="gender" value="Male">
				<br>
					<label for="gender_female">Female</label>
					<input type="radio" id="gender_female" name="gender" value="Female">
				<br>
					<label for="gender_other">Other</label>
					<input type="radio" id="gender_other" name="gender" value="Other">
				<br>
					<label for="student">Are you a 42 Student?</label>
					<input type="checkbox" id="student" name="student" value="Yes">
					<label for="student">Yes</label>
				<br>
					<!--<input type="button" id="submit_button" onclick="displayFormContents();" value="Submit">-->
					<input type="button" id="submit_button" onclick="displayFormContents();" value="Submit" class="hidden"> <!-- Bouton Submit masqué par défaut -->
                	<input type="button" id="check_button"  onclick="checkFormData();" value="Check-info" class="not-hidden"> <!-- Bouton "Check-info" pour valider les données -->
				<br>
			</form>
		</div>
		<script name="Script qui check le telephone">    
			function checkPhoneNumberFormat() 
			{
				var phoneNumber = document.getElementById('phone').value;
				var phoneNumberError = document.getElementById('phone_error');
				var phoneNumberRegex = /^(0[1-9])(\d{8})$/;
				var phoneBool = true;
				console.log("phone =", phoneNumber);
				if (phoneNumber === '')
				{
					phoneBool = false;
					phoneNumberError.textContent = 'Please enter your phone number.';
					phoneNumberError.style.display = 'block'; 
				}
				if (!phoneNumberRegex.test(phoneNumber) && phoneNumber !== '')
				{
					phoneBool = false;
					phoneNumberError.textContent = 'Wrong phone number. You must use the french format. Example : 0123456789.';
					phoneNumberError.style.display = 'block'; 
				}
				if (phoneBool === false)
					return false;
				else
				{
					phoneNumberError.style.display = 'none'; // Cache le message d'erreur s'il n'y a pas d'erreur
					return true;
				}
			}
			
			document.getElementById('submit_button').addEventListener('click', function(event) 
			{
				if (!checkPhoneNumberFormat()) 
				{
						event.preventDefault(); // Empêche la soumission du formulaire si le format n'est pas valide
				}
			});
		</script>
		<script name="Script qui check le format du nom/prenom">
			function checkNameFormat() 
			{
				var firstname = document.getElementById('firstname');
				var firstnameError = document.getElementById('firstname_error');
				var name = document.getElementById('name');
				var nameError = document.getElementById('name_error');
				var firstnameBool = true;
				var nameBool = true;

				console.log("Firstname =", firstname.value);
				console.log("name =", name.value);
				if (firstname.value === '') 
				{
					firstnameBool = false;
					firstnameError.textContent = 'Please enter your firstname.'; // Met à jour le message d'erreur
					firstnameError.style.display = 'block'; // Affiche le message d'erreur
				}
				if (name.value === '')
				{
					nameBool = false;
					nameError.textContent = 'Please enter your name.';
					nameError.style.display = 'block';
				}
				var nameRegex = /^[a-zA-ZàâäéèêëîïôöùûüçÀÂÄÉÈÊËÎÏÔÖÙÛÜÇ'-]+$/u;
				if (!nameRegex.test(firstname.value) && firstname.value !== '')
				{
					firstnameBool = false;
					firstnameError.textContent = 'Wrong firstname, only accepted characters are letters and \' and -.'; // Met à jour le message d'erreur
					firstnameError.style.display = 'block'; // Affiche le message d'erreur
				}
				if (!nameRegex.test(name.value) && name.value !== '')
				{
					nameBool = false;
					nameError.textContent = 'Wrong name, only accepted characters are letters and \' and -.';
					nameError.style.display = 'block';
				}
				if (nameBool === false || firstnameBool === false)
					return false;
				else
				{
					firstnameError.style.display = 'none'; // Cache le message d'erreur s'il n'y a pas d'erreur
					nameError.style.display = 'none';
					return true;
				}
			}

		</script>
		<script name="Sert a checker l'age">
			function checkAgeFormat() 
			{
				var age = document.getElementById('age');
				var ageError = document.getElementById('age_error');
				var ageBool = true;

				console.log("age =", age.value);
				if (age.value === '') 
				{
					ageBool = false;
					ageError.textContent = 'Please enter your age.';
					ageError.style.display = 'block';
				}
				if (ageBool === false)
					return false;
				else 
				{
					ageError.style.display = 'none';
					return true; // Retourne true si l'âge est saisi
				}
			}
		</script>
		<script>
			function checkEmailFormat()
			{
				var email = document.getElementById("email");
				var emailError = document.getElementById("email_error");
				var emailBool = true;

				console.log("email =", email.value);
				var emailRegex = /^[a-zA-Z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,10}$/;
				if (email.value === '')
				{
					emailBool = false;
					emailError.textContent = 'Please enter your email address.';
					emailError.style.display = 'block';
				}
				if (!emailRegex.test(email.value) && email.value !== '')
				{
					emailBool = false;
					emailError.textContent = 'Wrong email format. Please use : popopopo123@popopo.lolo';
					emailError.style.display = 'block';
				}
				if (emailBool === false)
					return false;
				else
				{
					emailError.style.display = 'none';
					return true;
				}
			}
		</script>
		<script name="Verification globale">

			function checkFormData() 
			{
        		var isNameValid = checkNameFormat(); // Vérifie le format du nom et du prénom
				var isPhoneNumberValid = checkPhoneNumberFormat(); // Vérifie le format du numéro de téléphone
				var isAgeValid = checkAgeFormat();
				var isEmailFormat = checkEmailFormat();

        		// Affiche ou masque le bouton "submit_button" en fonction des résultats de validation
        		if (isNameValid && isPhoneNumberValid && isAgeValid && isEmailFormat)
				{
            		//document.getElementById('submit_button').style.display = 'block'; // Affiche le bouton
					document.getElementById('submit_button').classList.remove('hidden');
					document.getElementById('submit_button').classList.add('not-hidden');
					document.getElementById('check_button').classList.remove('not-hidden');
					document.getElementById('check_button').classList.add('hidden');
					//document.getElementById('check_button').style.display = 'none';
				}
        		else
            		document.getElementById('submit_button').style.display = 'none'; // Masque le bouton
    		}
		</script>
		<script src="popup.js" name="Script de l'exercice"></script>
    </body>
</html>