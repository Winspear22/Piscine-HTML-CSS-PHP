<!DOCTYPE html>
<html>
    <head>
        <title>Form</title>
        <style>
			@import url('https://fonts.cdnfonts.com/css/ninja-naruto');

			body 
			{
				/* Taille (largeur, longueur, taille maximum) */
				height: 100vh; /* Hauteur de la fenêtre visible */

				/* Position (top, bottom, left, right, relative, static, etc...) */
				/* Aucune propriété de position définie pour le corps */

				/* Border (pas de border, border, taille de la border, etc...) */
				/* Aucune bordure définie pour le corps */

				/* Background (color, transparence, etc...) */
				background-image: url('https://i.ibb.co/dMLBCF1/8OL7JCh.jpg'); /* Définit l'image de fond */
				background-size: cover; /* Ajuste la taille de l'image pour couvrir toute la zone */
				background-position: center; /* Positionne l'image de fond au centre */
				/*background-repeat: no-repeat; *//* Empêche la répétition de l'image de fond */

				/* Autres propriétés */
				font-family: 'Ninja Naruto', sans-serif;
				color: #333;
			}

			/*-------------------------------------------------------------------------------------*/
			/*--------------------------------- FORMULAIRE GLOBAL CSS -----------------------------*/
			/*-------------------------------------------------------------------------------------*/
            
			form 
			{
				/* Opacité */
				opacity: 0.9;

				/* Taille (largeur, longueur, taille maximum) */
				max-width: 800px;
				height: 600px; /* Ajustez la hauteur selon vos besoins */
				overflow-y: auto; /* Ajoute une barre de défilement verticale si nécessaire */

				/* Position (top, bottom, left, right, relative, static, etc...) */
				/* Aucune propriété de position définie pour le formulaire */

				/* Border (pas de border, border, taille de la border, etc...) */
				border: 3px solid #FFB81C;
				border-radius: 10px;

				/* Background (color, transparence, etc...) */
				background-color: #FEECC5;

				/* Autres propriétés */
				margin: 0 auto; /* Centre le formulaire horizontalement */
				padding: 20px;
				
			}
            
			/* Style pour les balises label */
			label 
			{
				/* Display (block, inline, inline-block, etc...) */
				display: block;

				/* Margin (espacement autour de l'élément) */
				margin-top: 15px;

				/* Couleur du texte */
				color: #FFB81C;
			}

			/* Style pour les boutons de type "button" */
			input[type="button"] 
			{
				/* Background (color, transparence, etc...) */
				background-color: #FFB81C;

				/* Font (police, taille de police, etc...) */
				font-family: 'Ninja Naruto', sans-serif;
				color: #333; /* Couleur du texte */

				/* Position (top, bottom, left, right, relative, static, etc...) */
				position: relative; /* Position relative à sa position normale */

				/* Décalage vers la gauche */
				left: 350px;

				/* Taille */
				height: 35px;

				/* Border (pas de border, border, taille de la border, etc...) */
				border-radius: 13%; /* Bordure arrondie */
			}


			/*-------------------------------------------------------------------------------------*/
			/*-------------------------------- FORMULAIRE RADIO CSS -------------------------------*/
			/*-------------------------------------------------------------------------------------*/
			.radio-group 
			{
				display: flex; 
				align-items: center;
				position: relative; /* Le conteneur parent doit être positionné relativement */
			}

			.radio-error 
			{
				position: absolute;
				top: 15px; /* Ajustez cette valeur pour aligner verticalement comme désiré */
				right: 350px; /* Ajustez pour positionner horizontalement le message d'erreur */
				color: red;
				font-size: 12px;
				display: none; /* Initialement caché, affiché via JavaScript si nécessaire */
			}

			.radio-group input[type="radio"]
			{
				display: inline-block;
				margin-right: 10px; /* adjust as needed */
			}
			
			.radio-group label 
			{
				display: inline-block;
				margin-right: 15px; /* adjust as needed */
			}

			/*-------------------------------------------------------------------------------------*/
			/*------------------------------- FORMULAIRE CHECKBOX CSS -----------------------------*/
			/*-------------------------------------------------------------------------------------*/

			.checkbox-group 
			{
				display: flex;
				align-items: center; /* Alignement vertical au centre */
				flex-wrap: wrap; /* Permet aux éléments de passer à la ligne si nécessaire */
				position: relative;
			}

			.checkbox-choice 
			{
				display: flex;
				align-items: center; /* Alignement vertical au centre */
				margin-right: 15px; /* Espacement entre les choix */
			}

			.checkbox-error
			{
				position: absolute;
				top: 0; /* Ajustement vertical */
				right: 0; /* Ajustement horizontal */
				color: red;
				font-size: 12px;
				display: block; /* Changez ceci en 'block' si vous souhaitez toujours l'afficher */
			}

			/* Ajustez selon vos besoins pour les labels spécifiquement */
			.checkbox-choice label 
			{
				margin-left: 5px; /* Espacement entre la case à cocher et le label */	
			}

			.checkbox-choice-yes 
			{
				position: relative;
				top: -5px;
				right: -5px;
			}

			.checkbox-choice-no 
			{
				position: relative;
				top: -5px;
				right: -5px;
			}

			/*-------------------------------------------------------------------------------------*/
			/*-------------------------------- FORMULAIRE TEXT CSS --------------------------------*/
			/*-------------------------------------------------------------------------------------*/
			
			.formulaire-firstname 
			{
				display: flex;
				align-items: center; /* Aligner verticalement les éléments du formulaire et le message d'erreur */
				margin-bottom: 10px; /* Espacement entre les groupes de formulaire */
			}
			
			.formulaire-firstname label, .formulaire-firstname input, .formulaire-firstname .error 
			{
    			margin-right: 10px; /* Espacement entre les éléments du formulaire */
			}

			.error 
			{
				color: red;
				font-size: 12px;
				display: none; /* Initialement caché, affiché via JavaScript si nécessaire */
			}

			/*-------------------------------------------------------------------------------------*/
			/*--------------------------------- MISCELLEANOUS CSS ---------------------------------*/
			/*-------------------------------------------------------------------------------------*/
			.hidden 
			{
				display: none;
			}

			.not-hidden
			{
				display: block;
			}
            
        </style>
    </head>
    <body>
		<script src="popup.js" name="Script de l'exercice"></script>
		<div class="formulaire-entier"> 
			<form action="#" method="post">        
				<br>
					<div class="formulaire-firstname">
						<label for="firstname">firstname</label>
						<input type="text" id="firstname" name="firstname" placeholder="Your firstname" maxlength="15">
						<span id="firstname_error" class="error"></span> <!-- Message d'erreur pour le prénom -->
					</div>
				<br>
					<div class="formulaire-firstname">
						<label for="name">name</label>
						<input type="text" id="name" name="name" placeholder="Your Family name" maxlength="15">
						<span id="name_error" class="error"></span> <!-- Message d'erreur pour le nom -->
					</div>
				<br>
					<div class="formulaire-firstname">
						<label for="age">Age</label>
						<input type="date" id="age" name="age">
						<span id="age_error" class="error"></span> <!-- Message d'erreur pour l'âge -->
					</div>
				<br>
					<div class="formulaire-firstname">
						<label for="phone">Phone number</label>
						<input type="tel" id="phone" name="phone" placeholder="Write your phone number" maxlength="10"/>
						<span id="phone_error" class="error"></span> <!-- Message d'erreur pour le phone number -->
					</div>
				<br>
					<div class="formulaire-firstname">
						<label for="email">email</label> 
						<input type="email" id="email" name="email" placeholder="Write your email">
						<span id="email_error" class="error"></span> <!-- Message d'erreur pour le email -->
					</div>
				<br>
				<label for="gender">What is your gender ?</label>
				<div class="radio-group">
    				<div class="radio-choice">
        				<input type="radio" id="gender_male" name="gender" value="Male">
        				<label for="gender_male">Male</label>
    				</div>
    				<div class="radio-choice">
        				<input type="radio" id="gender_female" name="gender" value="Female">
        				<label for="gender_female">Female</label>
    				</div>
    				<div class="radio-choice">
        				<input type="radio" id="gender_other" name="gender" value="Other">
        				<label for="gender_other">Other</label>
    				</div>
    				<span class="radio-error" id="gender_error"></span>
				</div>
				<br>
				<label for="student">Are you a 42 Student?</label>
					<div class="checkbox-group">
						<div class="checkbox-choice">
							<input type="checkbox" id="student" name="student" value="Yes">
							<label for="student" class="checkbox-choice-yes">Yes</label>
						</div>
						<div class="checkbox-choice">
							<input type="checkbox" id="not_student" name="not_student" value="No">
							<label for="not_student" class="checkbox-choice-no">No</label>
						</div>
						<span id="student_error" class="error"></span>
					</div>
				<br>
				<div class="button-container">
					<input type="button" id="check_button" onclick="checkFormData();" value="Submit" class="not-hidden">
				</div>
				<br>
			</form>
		</div>
		<script name="Script qui check le telephone">    
			function checkPhoneNumberFormat() 
			{
				var phoneNumber = document.getElementById('phone').value;
				var phoneNumberError = document.getElementById('phone_error');
				var phoneNumberRegex = /^(0[1-9])(\d{8})$/;
				var phoneBool = true;
				console.log("phone =", phoneNumber);
				if (phoneNumber === '')
				{
					phoneBool = false;
					phoneNumberError.textContent = 'Please enter your phone number.';
					phoneNumberError.style.display = 'block'; 
				}
				if (!phoneNumberRegex.test(phoneNumber) && phoneNumber !== '')
				{
					phoneBool = false;
					phoneNumberError.textContent = 'Wrong phone number. You must use the french format. Example : 0123456789.';
					phoneNumberError.style.display = 'block'; 
				}
				if (phoneBool === false)
					return false;
				else
				{
					phoneNumberError.style.display = 'none'; // Cache le message d'erreur s'il n'y a pas d'erreur
					return true;
				}
			}
		</script>
		<script name="Script qui check le format du nom/prenom">
			function checkNameFormat() 
			{
				var firstname = document.getElementById('firstname');
				var firstnameError = document.getElementById('firstname_error');
				var name = document.getElementById('name');
				var nameError = document.getElementById('name_error');
				var firstnameBool = true;
				var nameBool = true;

				console.log("Firstname =", firstname.value);
				console.log("name =", name.value);
				if (firstname.value === '') 
				{
					firstnameBool = false;
					firstnameError.textContent = 'Please enter your firstname.'; // Met à jour le message d'erreur
					firstnameError.style.display = 'block'; // Affiche le message d'erreur
				}
				if (name.value === '')
				{
					nameBool = false;
					nameError.textContent = 'Please enter your name.';
					nameError.style.display = 'block';
				}
				var nameRegex = /^[a-zA-ZàâäéèêëîïôöùûüçÀÂÄÉÈÊËÎÏÔÖÙÛÜÇ'-]+$/u;
				if (!nameRegex.test(firstname.value) && firstname.value !== '')
				{
					firstnameBool = false;
					firstnameError.textContent = 'Wrong firstname, only accepted characters are letters and \' and -.'; // Met à jour le message d'erreur
					firstnameError.style.display = 'block'; // Affiche le message d'erreur
				}
				if (!nameRegex.test(name.value) && name.value !== '')
				{
					nameBool = false;
					nameError.textContent = 'Wrong name, only accepted characters are letters and \' and -.';
					nameError.style.display = 'block';
				}
				if (nameBool === false)
				{
					if (firstnameBool === true)
						firstnameError.style.display = 'none'; // Cache le message d'erreur s'il n'y a pas d'erreur
					return false;
				}
				if (firstnameBool === false)
				{
					if (nameBool === true)
						nameError.style.display = 'none';
					return false;
				}
				else
				{
					firstnameError.style.display = 'none'; // Cache le message d'erreur s'il n'y a pas d'erreur
					nameError.style.display = 'none';
					return true;
				}
			}

		</script>
		<script name="Sert a checker l'age">
			function checkAgeFormat() 
			{
				var age = document.getElementById('age');
				var ageError = document.getElementById('age_error');
				var ageBool = true;

				console.log("age =", age.value);
				if (age.value === '') 
				{
					ageBool = false;
					ageError.textContent = 'Please enter your age.';
					ageError.style.display = 'block';
				}
				if (ageBool === false)
					return false;
				else 
				{
					ageError.style.display = 'none';
					return true; // Retourne true si l'âge est saisi
				}
			}
		</script>
		<script>
			function checkEmailFormat()
			{
				var email = document.getElementById("email");
				var emailError = document.getElementById("email_error");
				var emailBool = true;

				console.log("email =", email.value);
				var emailRegex = /^[a-zA-Z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,10}$/;
				if (email.value === '')
				{
					emailBool = false;
					emailError.textContent = 'Please enter your email address.';
					emailError.style.display = 'block';
				}
				if (!emailRegex.test(email.value) && email.value !== '')
				{
					emailBool = false;
					emailError.textContent = 'Wrong email format. Please use : popopopo123@popopo.lolo';
					emailError.style.display = 'block';
				}
				if (emailBool === false)
					return false;
				else
				{
					emailError.style.display = 'none';
					return true;
				}
			}
		</script>

		<script name="gender check">
			function checkGenderSelection() 
			{
				var genderRadios = document.getElementsByName('gender');
				var genderError = document.getElementById('gender_error');
				var genderBool = false;

				for (var i = 0; i < genderRadios.length; i++) 
				{
					if (genderRadios[i].checked) 
					{
						genderBool = true;
						break;
					}
				}

				if (genderBool === false) 
				{
					genderError.textContent = 'Please select your gender.';
					genderError.style.display = 'block';
					return false;
				} 
				else 
				{
					genderError.style.display = 'none';
					return true;
				}
			}

			/* Sert a deselectionner le checkbox lors d'un refresh */
			window.onload = function() 
			{
    			var radioButtons = document.querySelectorAll('input[type="radio"]');
    			for (var i = 0; i < radioButtons.length; i++)
        			radioButtons[i].checked = false;

				var checkBoxButtons = document.querySelectorAll('input[type="checkbox"]');
    			for (var i = 0; i < checkBoxButtons.length; i++)
        			checkBoxButtons[i].checked = false;
			};
		</script>
		<script name="42 student check">
			function Student42Format() 
			{
				var studentCheckbox = document.getElementById('student');
				var notStudentCheckbox = document.getElementById('not_student');
				var studentError = document.getElementById('student_error');
				var studentBool = true;
		
				console.log("checkbox42 =", studentCheckbox.checked);
				if (!studentCheckbox.checked && !notStudentCheckbox.checked) 
				{
					studentBool = false;
					studentError.textContent = 'You must tell if you are a 42 student or not.';
					studentError.style.display = 'block';
    			} 
				else 
				{
					studentError.style.display = 'none';
					return true;
    			}
			}
		</script>
		<script name="Verification globale">

			function checkFormData() 
			{
        		var isNameValid = checkNameFormat(); // Vérifie le format du nom et du prénom
				var isPhoneNumberValid = checkPhoneNumberFormat(); // Vérifie le format du numéro de téléphone
				var isAgeValid = checkAgeFormat();
				var isEmailValid = checkEmailFormat();
				var isGenderValid = checkGenderSelection();
				var is42StudentValid = Student42Format();

        		// Affiche ou masque le bouton "submit_button" en fonction des résultats de validation
        		if (isNameValid && isPhoneNumberValid && isAgeValid && isEmailValid && is42StudentValid && isGenderValid)
				{
					var formErrorElements = 
					{
					// Mapping des éléments d'erreur du formulaire
						errors: 
						{
							firstnameError: document.getElementById('firstname_error'),
							nameError: document.getElementById('name_error'),
							ageError: document.getElementById('age_error'),
							phoneError: document.getElementById('phone_error'),
							emailError: document.getElementById('email_error'),
							genderError: document.getElementById('gender_error'),
							studentError: document.getElementById('student_error')
						}
					}
					Object.values(formErrorElements.errors).forEach(function(errorElement) 
					{
            			errorElement.style.display = 'none';
        			});
					setTimeout(function() {displayFormContents();}, 10);				
				}
    		}
		</script>
    </body>
</html>